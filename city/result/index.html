<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../place/map.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Momo+Trust+Display&display=swap"
      rel="stylesheet"
    />
    <title>Metrop Géo</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  </head>
  <body>
    <style>
      h1 {
        margin-bottom: 12px;
      }
      table {
        border-collapse: collapse;
        margin: 0 auto;
        width: 50vw;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        border-radius: 8px;
        overflow: hidden;
      }
      thead {
        background: #616161;
        color: #fff;
      }
      th,
      td {
        padding: 10px 12px;
        text-align: left;
        border-bottom: 1px solid #eee;
        font-size: 14px;
      }
      svg{
        fill: currentColor;
      }
    </style>
    <!--
      <div style="color: #c7bc41; display: flex; justify-content: center; align-items: center; gap: 20px; border: #c7bc41 solid 2px; border-radius: 15px; margin-right: 50px; margin-left: 50px; box-shadow: 0px 0px 118px 9px #000000; background-color: #1a1a1a;"><svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="40px" fill="#e3e3e3"><path d="M480-140q83 0 141.5-58.5T680-340q0-83-58.5-141.5T480-540q-83 0-141.5 58.5T280-340q0 83 58.5 141.5T480-140ZM346-563q28-17 60-26.5t67-10.5L363-820H217l129 257Zm-73 380q-25-33-39-72.5T220-340q0-45 14-84.5t39-72.5q-57 10-95 53.5T140-340q0 60 38 103.5t95 53.5Zm414 0q57-10 95-53.5T820-340q0-60-38-103.5T687-497q25 33 39 72.5t14 84.5q0 45-14 84.5T687-183ZM480-80q-40 0-76.5-11.5T336-123q-9 2-18 2.5t-19 .5q-91 0-155-64T80-339q0-87 58-149t143-69L142-837q-8-15 1-29t26-14h194q17 0 31.5 9t22.5 24l63 127 63-127q8-15 22.5-24t31.5-9h194q17 0 26 14t1 29L680-559q85 8 142.5 70T880-340q0 92-64 156t-156 64q-9 0-18.5-.5T623-123q-31 20-67 31.5T480-80Zm0-260ZM346-563 217-820l129 257Zm134 277-55 42q-5 3-9.5 0t-2.5-8l21-69-55-39q-5-3-3-8.5t7-5.5h68l22-72q2-5 7-5t7 5l22 72h68q5 0 7 5.5t-3 8.5l-55 39 21 69q2 5-2.5 8t-9.5 0l-55-42Zm134-277 129-257H597l-83 167 30 60q19 5 36.5 12.5T614-563Z"/></svg>
      <h4 style="color: #fff;">Meilleur score !</h4>
    </div>
    <br>
<div style="color: #abaaa1; display: flex; justify-content: center; align-items: center; gap: 20px; border: #abaaa1 solid 2px; border-radius: 15px; margin-right: 50px; margin-left: 50px; box-shadow: 0px 0px 118px 9px #000000; background-color: #1a1a1a;"><svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="40px" fill="#e3e3e3"><path d="M480-140q83 0 141.5-58.5T680-340q0-83-58.5-141.5T480-540q-83 0-141.5 58.5T280-340q0 83 58.5 141.5T480-140ZM346-563q28-17 60-26.5t67-10.5L363-820H217l129 257Zm-73 380q-25-33-39-72.5T220-340q0-45 14-84.5t39-72.5q-57 10-95 53.5T140-340q0 60 38 103.5t95 53.5Zm414 0q57-10 95-53.5T820-340q0-60-38-103.5T687-497q25 33 39 72.5t14 84.5q0 45-14 84.5T687-183ZM480-80q-40 0-76.5-11.5T336-123q-9 2-18 2.5t-19 .5q-91 0-155-64T80-339q0-87 58-149t143-69L142-837q-8-15 1-29t26-14h194q17 0 31.5 9t22.5 24l63 127 63-127q8-15 22.5-24t31.5-9h194q17 0 26 14t1 29L680-559q85 8 142.5 70T880-340q0 92-64 156t-156 64q-9 0-18.5-.5T623-123q-31 20-67 31.5T480-80Zm0-260ZM346-563 217-820l129 257Zm134 277-55 42q-5 3-9.5 0t-2.5-8l21-69-55-39q-5-3-3-8.5t7-5.5h68l22-72q2-5 7-5t7 5l22 72h68q5 0 7 5.5t-3 8.5l-55 39 21 69q2 5-2.5 8t-9.5 0l-55-42Zm134-277 129-257H597l-83 167 30 60q19 5 36.5 12.5T614-563Z"/></svg>
      <h4 style="color: #fff;">Second Meilleur score !</h4>
    </div>
    <br>
<div style="color: #896939; display: flex; justify-content: center; align-items: center; gap: 20px; border: #896939 solid 2px; border-radius: 15px; margin-right: 50px; margin-left: 50px; box-shadow: 0px 0px 118px 9px #000000; background-color: #1a1a1a;"><svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="40px" fill="#e3e3e3"><path d="M480-140q83 0 141.5-58.5T680-340q0-83-58.5-141.5T480-540q-83 0-141.5 58.5T280-340q0 83 58.5 141.5T480-140ZM346-563q28-17 60-26.5t67-10.5L363-820H217l129 257Zm-73 380q-25-33-39-72.5T220-340q0-45 14-84.5t39-72.5q-57 10-95 53.5T140-340q0 60 38 103.5t95 53.5Zm414 0q57-10 95-53.5T820-340q0-60-38-103.5T687-497q25 33 39 72.5t14 84.5q0 45-14 84.5T687-183ZM480-80q-40 0-76.5-11.5T336-123q-9 2-18 2.5t-19 .5q-91 0-155-64T80-339q0-87 58-149t143-69L142-837q-8-15 1-29t26-14h194q17 0 31.5 9t22.5 24l63 127 63-127q8-15 22.5-24t31.5-9h194q17 0 26 14t1 29L680-559q85 8 142.5 70T880-340q0 92-64 156t-156 64q-9 0-18.5-.5T623-123q-31 20-67 31.5T480-80Zm0-260ZM346-563 217-820l129 257Zm134 277-55 42q-5 3-9.5 0t-2.5-8l21-69-55-39q-5-3-3-8.5t7-5.5h68l22-72q2-5 7-5t7 5l22 72h68q5 0 7 5.5t-3 8.5l-55 39 21 69q2 5-2.5 8t-9.5 0l-55-42Zm134-277 129-257H597l-83 167 30 60q19 5 36.5 12.5T614-563Z"/></svg>
      <h4 style="color: #fff;">Troisième Meilleur score !</h4>
    </div>
    -->
    <h1>Tableau des scores</h1>

    <table id="scoresTable" aria-label="Tableau de scores">
      <thead>
        <tr>
          <th>#</th>
          <th>Mégapole</th>
          <th>Pays</th>
          <th>km</th>
        </tr>
      </thead>
      <tbody id="tbody"></tbody>
    </table>
    <script>
      const params = new URLSearchParams(window.location.search);
      const returned = params.get("return");
      const learningID = parseInt(params.get("learningID"));
      const jsonName = params.get("json");
      const posi = parseInt(localStorage.getItem(jsonName + "_learn"))
      function back() {
        if(miss / (fail + miss + good) < 0.1 && fail == 0 && posi == learningID){
          localStorage.setItem(jsonName + "_learn",posi+1)
        }
        const params = new URLSearchParams({
          json: jsonName,
        });
        window.location.replace(returned + "/index.html?" + params);
      }
      if (
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches
      ) {
        document.body.style.color = "#ffffff";
        document.body.style.backgroundColor = "#1a1a1aff";
      } else {
        document.body.style.color = "#000000ff";
        document.body.style.backgroundColor = "#ffffffff";
      }

      let miss = 0;
      let fail = 0;
      let good = 0;

      function fill() {
        score = JSON.parse(localStorage.getItem("SCORE"));
        city = JSON.parse(localStorage.getItem("CITY"));
        for (let i = 0; i < city.length; i++) {
          document.getElementById("tbody").innerHTML +=
            '<tr id="tra' + i + '"></tr>';
        }
        for (let i = 0; i < city.length; i++) {
          document.getElementById("tra" + i).innerHTML =
            '<th id="tid' +
            i +
            '">' +
            (i + 1) +
            ".</th>" +
            "<th>" +
            city[i].name +
            "</th>" +
            "<th>" +
            city[i].country +
            "</th>" +
            "<th>" +
            score[i] +
            "</th>";
        }
        for (let i = 0; i < city.length; i++) {
          let color = "";
          if (score[i] < 100) {
            good++;
            color = "43a548";
          } else if (score[i] < 300) {
            miss++;
            color = "f2651f";
          } else {
            fail++;
            color = "e23437";
          }
          document.getElementById("tid" + i).style.backgroundColor =
            "#" + color;
        }
      }
      fill();
    </script>
    <div id="info">
      <br /><br />
      <button class="btn" onclick="back()">Revenir au menu principal</button>
    </div>
  </body>
</html>
